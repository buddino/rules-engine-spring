package it.unifi.dinfo.rules;

import it.unifi.dinfo.service.SwaggerClient;
import org.easyrules.annotation.Action;
import org.easyrules.annotation.Condition;
import org.easyrules.annotation.Rule;
import org.springframework.beans.factory.annotation.Autowired;

@Rule
public class ExploitNaturalLight {

    Long exceedings = 0L;
    Long exceedingsThreshold = 3L;

    @Autowired
    SwaggerClient sparks;

    @Condition
    public boolean condition() {
        exceedings = Long.parseLong(sparks.readProperty("gaia-prato/gw1/weather/light", "exceedings"));
        return exceedings > exceedingsThreshold;

    }

    @Action
    public void action() {
        System.err.println(String.format("Exceedings (%d) greater than threshold (%d)", exceedings, exceedingsThreshold));
    }


}
